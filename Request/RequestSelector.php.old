<?php
/**
 * Created by PhpStorm.
 * User: ari
 * Date: 9/6/14
 * Time: 3:10 PM
 */
namespace CPath\Request;

use CPath\Request\CLI\CLIRequest;
use CPath\Request\Common\UnknownRequest;
use CPath\Request\Web\GETRequest;
use CPath\Request\Web\FormRequest;

final class RequestSelector
{
    /**
     * Choose an IRequest instance to use for the session
     * @return IRequest
     */
    function getRequest() {
        if(!empty($_SERVER['argv']))
            return new CLIRequest($_SERVER['argv']);

        switch ($_SERVER["REQUEST_METHOD"]) {
            case 'GET':
                return new GETRequest();
            case 'POST':
            case 'PUT':
            case 'PATCH':
            case 'DELETE':
                return new FormRequest($_SERVER["REQUEST_METHOD"]);
            case 'CLI':
                return new CLIRequest(array()); // TODO: find possible arg sources? make new class
            default:
                return new UnknownRequest($_SERVER["REQUEST_METHOD"]);
        }
    }

}